(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/header-logo.855a8c98.svg"},25:function(e,t,a){e.exports=a.p+"static/media/success.e38b395c.svg"},26:function(e,t,a){e.exports=a.p+"static/media/error.4072126c.svg"},28:function(e,t,a){e.exports=a(39)},33:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(20),r=a.n(o),l=(a(33),a(27)),i=a(8),s=a(2),u=a(1),m=a(7),d=a(21),p=a.n(d);var f=function(e){e.loggedIn;var t=e.userEmail,a=e.onClick;return c.a.createElement("header",{className:"header"},c.a.createElement(m.b,{to:"/",className:"header__link"},c.a.createElement("img",{src:p.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0430\u0439\u0442\u0430",className:"header__logo"})),c.a.createElement("ul",{className:"header__nav"},c.a.createElement(u.b,{exact:!0,path:"/"},c.a.createElement("li",{className:"header__nav-item"},c.a.createElement("p",{className:"header__user-email"},t)),c.a.createElement("li",{className:"header__nav-item"},c.a.createElement("button",{onClick:a,className:"link header__link header__button header__button_signOut"},"\u0412\u044b\u0445\u043e\u0434"))),c.a.createElement(u.b,{path:"/sign-in"},c.a.createElement("li",{className:"header__nav-item"},c.a.createElement(m.b,{to:"/sign-up",className:"link header__link header__link_sign-up"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),c.a.createElement(u.b,{path:"/sign-up"},c.a.createElement("li",{className:"header__nav-item"},c.a.createElement(m.b,{to:"/sign-in",className:"header__link header__link_sign-in"},"\u0412\u0445\u043e\u0434")))))},h=c.a.createContext();var _=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,o=e.onCardDelete,r=c.a.useContext(h)._id,l=t.owner._id===r,i=t.likes.some((function(e){return e._id===r}));return c.a.createElement("li",{className:"card"},l?c.a.createElement("button",{className:"card__remove-button",type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){o(t)}}):"",c.a.createElement("img",{src:t.link,alt:"\u041b\u0443\u0447\u0448\u0430\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f ".concat(t.name),className:"card__image",onClick:function(){a(t)}}),c.a.createElement("div",{className:"card__description"},c.a.createElement("p",{className:"card__name"},t.name),c.a.createElement("div",{className:"card__like-cover"},c.a.createElement("button",{className:"".concat(i?"card__like card__like_active":"card__like"),type:"button","aria-label":"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0430\u0439\u043a",onClick:function(){n(t)}}),c.a.createElement("span",{className:"card__like-counter"},t.likes.length))))};var v=function(e){var t=e.onEditAvatar,a=e.onEditProfile,n=e.onAddPlace,o=e.onCardClick,r=e.cards,l=e.onCardLike,i=e.onCardDelete,s=e.isCardsLoading,u=c.a.useContext(h),m=u.name,d=u.about,p=u.avatar;return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:"profile"},c.a.createElement("button",{type:"button",onClick:t,className:"profile__avatar-button"},c.a.createElement("img",{className:"profile__avatar",src:p,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})),c.a.createElement("div",{className:"profile__info"},c.a.createElement("h1",{className:"profile__name"},m),c.a.createElement("button",{className:"profile__button-edit",onClick:a,type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),c.a.createElement("p",{className:"profile__profession"},d)),c.a.createElement("button",{className:"profile__button-add",type:"button",onClick:n,"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"})),c.a.createElement("section",{className:"elements"},c.a.createElement("ul",{className:"elements__list"},s?c.a.createElement("div",{className:"elements__loading-spinner"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null)):r.map((function(e){return c.a.createElement(_,{key:e._id,card:e,onCardLike:l,onCardDelete:i,onCardClick:o})})))))};var b=function(){return c.a.createElement("footer",{className:"footer"},c.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))},E=Object(n.forwardRef)((function(e,t){var a=e.isValid,n=void 0===a||a,o=e.name,r=e.title,l=e.children,i=e.isOpen,s=e.onClose,u=e.onSubmit,m=e.buttonText;return c.a.createElement("section",{className:"popup popup_type".concat(o," ").concat(i?"popup_opened":"")},c.a.createElement("div",{onClick:s,className:"popup__overlay popup__overlay_".concat(o)}),c.a.createElement("form",{ref:t,className:"popup__container popup__container_type_".concat(o),name:o,action:"#",onSubmit:u,noValidate:!0},c.a.createElement("h2",{className:"popup__title"},r),c.a.createElement("fieldset",{className:"popup__input-container"},l),c.a.createElement("button",{className:"popup__button popup__button_type_save ".concat(n?"":"popup__button_type_disabled"),type:"submit",disabled:!n},m||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),c.a.createElement("button",{className:"popup__close popup__close_type_".concat(o),onClick:s,type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e"})))})),g=a(12);function k(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({}),r=Object(s.a)(o,2),l=r[0],u=r[1],m=Object(n.useState)({}),d=Object(s.a)(m,2),p=d[0],f=d[1],h=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c(e),u(t),f(a)}),[c,u,f]);return{values:a,handleChange:function(e){var t=e.target,n=t.name,o=t.value;c(Object(i.a)(Object(i.a)({},a),{},Object(g.a)({},n,o))),u(Object(i.a)(Object(i.a)({},l),{},Object(g.a)({},n,t.validationMessage)))},errors:l,isValid:p,resetForm:h,setIsValid:f}}var O=a(14),j=function(e){var t=e.changeValue,a=e.classBlock,n=e.name,o=e.value,r=e.validationMessage,l=Object(O.a)(e,["changeValue","classBlock","name","value","validationMessage"]);return c.a.createElement("div",{className:"input__container ".concat(a,"__input-container")},c.a.createElement("input",Object.assign({},l,{className:"input ".concat(a,"__input ").concat(a,"__input_type_").concat(n),name:n,onChange:function(e){t(e)},value:o||""})),c.a.createElement("span",{className:"input__error ".concat(a,"__error")},r||""))};var C=function(e){var t=e.isOpen,a=e.onClose,o=e.onUpdateUser,r=e.isSending,l=Object(n.useContext)(h),i=Object(n.createRef)(),s=k(),u=s.values,m=s.handleChange,d=s.errors,p=s.isValid,f=s.setIsValid,_=s.resetForm;return Object(n.useEffect)((function(){f(i.current.checkValidity())}),[f,i]),Object(n.useEffect)((function(){l&&_(l)}),[l,_,t]),c.a.createElement(E,{ref:i,name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),o(u)},isValid:p,buttonText:r?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},c.a.createElement(j,{value:u.name,changeValue:m,classBlock:"popup",name:"name",type:"text",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",required:!0,minLength:"2",maxLength:"40",autoComplete:"off",validationMessage:d.name}),c.a.createElement(j,{value:u.about,changeValue:m,classBlock:"popup",name:"about",type:"text",placeholder:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f",required:!0,minLength:"2",maxLength:"200",autoComplete:"off",validationMessage:d.about}))};var y=function(e){var t=e.isOpen,a=e.onClose,o=e.onUpdateAvatar,r=e.isSending,l=Object(n.createRef)(),i=k(),s=i.values,u=i.handleChange,m=i.errors,d=i.isValid,p=i.setIsValid,f=i.resetForm;return Object(n.useEffect)((function(){p(l.current.checkValidity())}),[p,l]),Object(n.useEffect)((function(){f()}),[f,t]),c.a.createElement(E,{ref:l,name:"avatar-change",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),o(s)},isValid:d,buttonText:r?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},c.a.createElement(j,{value:s.avatar,changeValue:u,classBlock:"popup",name:"avatar",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,autoComplete:"off",validationMessage:m.avatar}))};var N=function(e){var t=e.isOpen,a=e.onClose,o=e.onAddPlace,r=e.isSending,l=Object(n.createRef)(),i=k(),s=i.values,u=i.handleChange,m=i.errors,d=i.isValid,p=i.setIsValid,f=i.resetForm;return Object(n.useEffect)((function(){p(l.current.checkValidity())}),[p,l]),Object(n.useEffect)((function(){f()}),[f,t]),c.a.createElement(E,{ref:l,name:"add-places",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),o(s)},isValid:d,buttonText:r?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},c.a.createElement(j,{value:s.name,changeValue:u,classBlock:"popup",name:"name",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"1",maxLength:"30",autoComplete:"off",validationMessage:m.name}),c.a.createElement(j,{value:s.link,changeValue:u,classBlock:"popup",name:"link",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,autoComplete:"off",validationMessage:m.link}))};var S=function(e){var t=e.card,a=e.onClose;return c.a.createElement("section",{className:"popup popup_type_img ".concat(t.isOpen?"popup_opened":"")},c.a.createElement("div",{onClick:a,className:"popup__overlay popup__overlay_image-card"}),c.a.createElement("div",{className:"popup__img-container"},c.a.createElement("figure",{className:"popup__figure"},c.a.createElement("img",{src:t.link,alt:"\u041b\u0443\u0447\u0448\u0430\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f ".concat(t.name),className:"popup__image"}),c.a.createElement("figcaption",{className:"popup__caption"},t.name),c.a.createElement("button",{className:"popup__close",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e",onClick:a}))))},V=a(23),L=a(24),x=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(V.a)(this,e),this._url=a,this._headers=n}return Object(L.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._url,"cards"),{headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"users/me"),{headers:this._headers}).then((function(t){return e._handleResponse(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._handleResponse(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._url,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._handleResponse(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return t._handleResponse(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleResponse(e)}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._handleResponse(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var a=this;return fetch("".concat(this._url,"cards/likes/").concat(e),{method:t?"PUT":"DELETE",headers:this._headers}).then((function(e){return a._handleResponse(e)}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-14/",headers:{authorization:"ccd33dbf-109f-4270-9c16-faebaa7150cb","Content-Type":"application/json"}}),T=function(e){var t=e.className,a=e.title,o=void 0===a?"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0444\u043e\u0440\u043c\u044b":a,r=e.buttonText,l=void 0===r?"\u0421\u0430\u0431\u043c\u0438\u0442 \u0444\u043e\u0440\u043c\u044b":r,i=e.loginLink,s=e.onSubmit,u=k(),d=u.values,p=u.handleChange,f=u.errors,h=u.isValid,_=u.setIsValid,v=u.resetForm,b=Object(n.createRef)();Object(n.useEffect)((function(){_(b.current.checkValidity())}),[_,b]);return c.a.createElement("form",{ref:b,className:"auth-form ".concat(t),onSubmit:function(e){s(e,d),v()},name:t,action:"#",noValidate:!0},c.a.createElement("h3",{className:"auth-form__title"},o),c.a.createElement("fieldset",{className:"auth-form__container"},c.a.createElement(j,{value:d.email,changeValue:p,classBlock:"auth-form",name:"email",type:"email",placeholder:"Email",required:!0,validationMessage:f.email}),c.a.createElement(j,{value:d.password,changeValue:p,classBlock:"auth-form",name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,autoComplete:"off",validationMessage:f.password})),c.a.createElement("button",{type:"submit","aria-label":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435",className:"auth-form__button auth-form__button_submit ".concat(h?"":"auth-form__button_submit_disabled"),disabled:!h},l),c.a.createElement(m.b,{to:"/sign-in",className:"auth-form__is-login-link"},i?"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b? \u0412\u043e\u0439\u0442\u0438":""))},w=function(e){var t=e.onLogin;return c.a.createElement("div",null,c.a.createElement(T,{className:"login",title:"\u0412\u0445\u043e\u0434",buttonText:"\u0412\u043e\u0439\u0442\u0438",loginLink:!1,onSubmit:function(e,a){e.preventDefault();var n=a.email,c=a.password;t(n,c)}}))},I=function(e){var t=e.onRegister;return c.a.createElement("div",null,c.a.createElement(T,{className:"register",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",loginLink:!0,onSubmit:function(e,a){e.preventDefault();var n=a.email,c=a.password;t(n,c)}}))},R=function(e){var t=e.loggedIn,a=Object(O.a)(e,["loggedIn"]);return t?c.a.createElement(u.b,a):c.a.createElement(u.a,{to:"/sign-in"})},P="https://auth.nomoreparties.co",A=function(e){return e.ok?e.json():Promise.reject(e.status)},U=a(25),D=a.n(U),B=a(26),M=a.n(B),q=function(e){var t=e.message,a=e.isOpen,n=e.isSuccess,o=e.onClose;return c.a.createElement("section",{className:"infotooltip popup popup_infotooltip ".concat(a?"popup_opened":"")},c.a.createElement("div",{onClick:o,className:"popup__overlay popup__overlay_infotooltip"}),c.a.createElement("div",{className:"infotooltip__container"},n?c.a.createElement("img",{src:D.a,alt:"\u0443\u0441\u043f\u0435\u0448\u043d\u043e"}):c.a.createElement("img",{src:M.a,alt:"\u043e\u0448\u0438\u0431\u043a\u0430"}),c.a.createElement("h3",{className:"infotooltip__title"},t),c.a.createElement("button",{className:"popup__close popup__close_infotooltip",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e",onClick:o})))};var J=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!1),m=Object(s.a)(r,2),d=m[0],p=m[1],_=Object(n.useState)(!1),g=Object(s.a)(_,2),k=g[0],O=g[1],j=Object(n.useState)({}),V=Object(s.a)(j,2),L=V[0],T=V[1],U=Object(n.useState)({}),D=Object(s.a)(U,2),B=D[0],M=D[1],J=Object(n.useState)([]),F=Object(s.a)(J,2),z=F[0],H=F[1],W=Object(n.useState)({}),G=Object(s.a)(W,2),$=G[0],K=G[1],Q=Object(n.useState)(!1),X=Object(s.a)(Q,2),Y=X[0],Z=X[1],ee=Object(n.useState)(!1),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(!1),oe=Object(s.a)(ce,2),re=oe[0],le=oe[1],ie=Object(n.useState)(!1),se=Object(s.a)(ie,2),ue=se[0],me=se[1],de=Object(n.useState)(!1),pe=Object(s.a)(de,2),fe=pe[0],he=pe[1],_e=Object(n.useState)(!1),ve=Object(s.a)(_e,2),be=ve[0],Ee=ve[1],ge=Object(n.useState)(""),ke=Object(s.a)(ge,2),Oe=ke[0],je=ke[1],Ce=Object(n.useState)(""),ye=Object(s.a)(Ce,2),Ne=ye[0],Se=ye[1],Ve=Object(u.g)();function Le(){o(!1),p(!1),O(!1),T({}),Z(!1),he(!1)}function xe(){var e=localStorage.getItem("token");e&&function(e){return fetch("".concat(P,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return A(e)}))}(e).then((function(e){me(!0),Se(e.data.email),Ve.push("/")})).catch((function(e){return 400===e?console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"):401===e?console.log("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d"):void console.log(e)}))}return Object(n.useEffect)((function(){ne(!0),Promise.all([x.getInitialCards(),x.getUserInfo()]).then((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];H(a),M(n)})).catch((function(e){return console.error(e)})).finally((function(){return ne(!1)}))}),[]),Object(n.useEffect)((function(){function e(e){27===e.keyCode&&Le()}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),Object(n.useEffect)((function(){xe()}),[]),c.a.createElement("div",{className:"page"},c.a.createElement(h.Provider,{value:B},c.a.createElement(f,{loggedIn:ue,userEmail:Ne,onClick:function(){localStorage.removeItem("token"),me(!1),Ve.push("/sign-in")}}),c.a.createElement("main",{className:"content"},c.a.createElement(u.d,null,c.a.createElement(R,{exact:!0,path:"/",loggedIn:ue},c.a.createElement(v,{onEditAvatar:function(){O(!0)},onEditProfile:function(){o(!0)},onAddPlace:function(){p(!0)},onCardClick:function(e){T(Object(i.a)(Object(i.a)({},e),{},{isOpen:!0}))},cards:z,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===B._id}));x.changeLikeCardStatus(e._id,!t).then((function(t){var a=z.map((function(a){return a._id===e._id?t:a}));H(a)})).catch((function(e){return console.error(e)}))},onCardDelete:function(e){K(e),Z(!0)},isCardsLoading:ae})),c.a.createElement(u.b,{path:"/sign-up"},c.a.createElement(I,{onRegister:function(e,t){(function(e,t){return fetch("".concat(P,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then((function(e){return A(e)}))})(e,t).then((function(e){e&&(je("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),he(!0),Ee(!0),Ve.push("/sign-in"))})).catch((function(e){if(je("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),he(!0),Ee(!1),400===e)return console.log("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439");console.log(e)}))}})),c.a.createElement(u.b,{path:"/sign-in"},c.a.createElement(w,{onLogin:function(e,t){(function(e,t){return fetch("".concat(P,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then((function(e){return A(e)}))})(e,t).then((function(t){t.token&&(localStorage.setItem("token",t.token),Se(e),me(!0),Ve.push("/"))})).catch((function(e){return je("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),he(!0),Ee(!1),400===e?console.log("\u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"):401===e?console.log("\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):void console.log(e)}))}})),c.a.createElement(u.b,null,ue?c.a.createElement(u.a,{to:"/"}):c.a.createElement(u.a,{to:"/sign-in"})))),c.a.createElement(b,null),c.a.createElement(q,{message:Oe,isSuccess:be,isOpen:fe,onClose:Le}),c.a.createElement(y,{isSending:re,isOpen:k,onClose:Le,onUpdateAvatar:function(e){le(!0),x.changeAvatar(e).then((function(e){return M(e)})).then((function(){return Le()})).catch((function(e){return console.error(e)})).finally((function(){return le(!1)}))}}),c.a.createElement(C,{isSending:re,isOpen:a,onClose:Le,onUpdateUser:function(e){le(!0),x.setUserInfo(e).then((function(e){return M(e)})).then((function(){return Le()})).catch((function(e){return console.error(e)})).finally((function(){return le(!1)}))}}),c.a.createElement(N,{isSending:re,isOpen:d,onClose:Le,onAddPlace:function(e){le(!0),x.addCard(e).then((function(e){return H([e].concat(Object(l.a)(z)))})).then((function(){return Le()})).catch((function(e){return console.error(e)})).finally((function(){return le(!1)}))}}),c.a.createElement(S,{card:L,onClose:Le}),c.a.createElement(E,{isEnabled:"true",name:"card-delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:Y,onClose:Le,onSubmit:function(e){le(!0),e.preventDefault(),x.removeCard($._id).then((function(){var e=z.filter((function(e){return e!==$}));H(e)})).then((function(){return Z(!1)})).catch((function(e){return console.error(e)})).finally((function(){return le(!1)}))},buttonText:re?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(m.a,null,c.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.245839eb.chunk.js.map